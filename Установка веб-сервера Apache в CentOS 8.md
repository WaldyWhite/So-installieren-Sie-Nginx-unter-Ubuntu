# Установка веб-сервера Apache в CentOS 8.

---
<br>

## Шаг 1 — Установка Apache

Apache доступен в используемых по умолчанию репозиториях программного обеспечения CentOS, т. е. вы можете установить его с помощью диспетчера пакетов *dnf*.

С помощью non-root user с привилегиями sudo, настроенного согласно предварительным требованиям, установите пакет Apache:

    # sudo dnf install httpd

После подтверждения установки dnf установит Apache и все требуемые зависимости.

---
---
<br>

## Шаг 2 — Настройка брандмауэра

Если вы выполнили рекомендации из руководства Начальная настройка сервера с CentOS 8. *Шаг 4*, указанные в разделе предварительных требований, на вашем сервере уже будет установлен брандмауэр *firewalld* для обслуживания запросов через HTTP.

Если вы планируете настроить Apache для обслуживания запросов через HTTPS, вам также нужно открыть порт *443*, включив службу *https*:

    # sudo firewall-cmd --permanent --add-service=https

Затем перезагрузите брандмауэр, чтобы новые правила начали действовать:

    # sudo firewall-cmd --reload

После перезагрузки брандмауэра вы будете готовы запустить службу и проверить веб-сервер.

## Шаг 3 — Проверка веб-сервера

Apache не запускается автоматически на CentOS после завершения установки. Вам нужно будет запустить процесс Apache вручную:

    # sudo systemctl start httpd

Убедитесь, что служба запущена с помощью следующей команды:

    # sudo systemctl status httpd

Если служба запущена, вы получите значение *active* (активна) в статусе:

    Output
    httpd.service - The Apache HTTP Server
        Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disa>
        Active: active (running) since Thu 2020-04-23 22:25:33 UTC; 11s ago
     Docs: man:httpd.service(8)
     Main PID: 14219 (httpd)
        Status: "Running, listening on: port 80"
        Tasks: 213 (limit: 5059)
        Memory: 24.9M
        CGroup: /system.slice/httpd.service
           ├─14219 /usr/sbin/httpd -DFOREGROUND
           ├─14220 /usr/sbin/httpd -DFOREGROUND
           ├─14221 /usr/sbin/httpd -DFOREGROUND
           ├─14222 /usr/sbin/httpd -DFOREGROUND
           └─14223 /usr/sbin/httpd -DFOREGROUND

...

Откройте страницу Apache по умолчанию, чтобы подтвердить работу программного обеспечения через ваш IP-адрес:

    http://your_server_ip

Вы увидите стандартную веб-страницу Apache в CentOS 8:

<img src='Screenshot 2024-04-10 152240.png'>

<br>

Эта страница показывает, что Apache работает корректно. Также на ней содержится информация о важных файлах Apache и расположении директорий.

---
---
<br>

## Шаг 4 — Настройка виртуальных хостов (рекомендуется)

При работе с веб-сервером Apache вы можете использовать виртуальные хосты (аналогичные серверным блокам в Nginx) для инкапсуляции данных конфигурации и размещения на одном сервере нескольких доменов. На этом шаге мы будем настраивать домен с именем *example.com*, но вы должны будете заменить его собственным доменным именем. О том, как настроить доменное имя с помощью *DigitalOcean*, можно узнать из нашей сетевой документации.

Создайте каталог *html* для e*xample.com* следующим образом, используя флаг *-p* для создания необходимых родительских каталогов:
